!function(t,e,n){"use strict";var i={init:function(){this.component(),this.env(),this.error(),this.xhr()},component:function(){for(var t,n=e.getElementsByTagName("script"),i=0,o=n.length;o>i;i++)if(n[i].src.indexOf("molog")>-1){t=n[i].getAttribute("data-component");break}this.component=t||""},env:function(){for(var t,n=e.getElementsByTagName("script"),i=0,o=n.length;o>i;i++)if(n[i].src.indexOf("molog")>-1){t=n[i].getAttribute("data-env");break}this.env=t||""},error:function(){var e=this;t.onerror=function(t,n,i,o,r){var s=r?r.stack:null;e.format([t,n,i,o,s],0),e.inject()}},event:function(t){this.format(t,1),this.inject()},xhr:function(){var t,e,i,o=this,r=n.prototype.open,s=n.prototype.send;n.prototype.open=function(n,o){i=new Date,t=n,e=o,r.apply(this,arguments)},n.prototype.send=function(){var n=this,r=function(r){if(4==n.readyState)try{var s,a=r.target.status.toString(),c=new Date-i,h=/^[45]/.test(a.slice(0,-2));if(!h)return;try{s=JSON.parse(r.target.response)}catch(p){s=r.target.response.substring(0,100)}o.format([t,a,s,e,c],2),o.inject()}catch(p){}};this.addEventListener("readystatechange",r,!1),s.apply(this,arguments)}},format:function(t,e){switch(this.type=e,this.type){case 0:this.data={message:t[0],source:t[1],line:t[2],column:t[3],stack:t[4]};break;case 1:this.data="object"!=typeof t?{_event:t}:t;break;case 2:this.data={method:t[0],status:t[1],response:t[2],url:t[3],response_time:t[4]}}},url:function(){var e="&t="+this.type+"&d="+encodeURIComponent(JSON.stringify(this.data))+"&cw="+screen.width+"&ch="+screen.height;return t.location.protocol+"//log.pho.im/"+this.component+"/"+this.env+"/?ts="+(new Date).getTime()+e},inject:function(){var t=document.createElement("img");t.style.visibility="hidden",t.src=this.url(),e.getElementsByTagName("body")[0].appendChild(t),t.parentNode.removeChild(t)}},o={push:function(t,e){if("undefined"!=typeof t)try{i.event(t),e.call(null)}catch(n){}}};i.init(),t.Molog=t.Molog||o}(window,document,XMLHttpRequest);
